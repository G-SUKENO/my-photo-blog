---
import { createClient } from 'microcms-js-sdk';

const client = createClient({
  serviceDomain: '6t86gj78ob',
  apiKey: 'dCCdFLQew5T6YsttpgtRFfNO2S4A488jecvZ',
});

const res = await client.get({ 
  endpoint: 'photos',
  queries: { orders: '-date' } // 日付の新しい順に並べる
});
const posts = res.contents;

// 日付フォーマット用の関数
const formatDate = (dateString: string) => {
  const date = new Date(dateString);
  return date.getFullYear() + '.' + (date.getMonth() + 1).toString().padStart(2, '0') + '.' + date.getDate().toString().padStart(2, '0');
};
---

<html lang="ja">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My Photo Blog</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Sawarabi+Mincho&display=swap');
        
        body { 
            background: #fafafa; 
            font-family: "Sawarabi Mincho", serif; 
            margin: 0; 
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        header { 
            padding: 120px 0 80px; 
            text-align: center; 
        }

        h1 { 
            font-weight: normal; 
            letter-spacing: 0.5em; 
            font-size: 1.2rem; 
            color: #999;
            text-indent: 0.5em; /* 均等な中央寄せのため */
        }

        main { 
            max-width: 600px; 
            width: 90%;
            margin-bottom: 100px;
        }

        .post-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .post-item {
            margin-bottom: 60px;
            border-bottom: 1px solid #eee;
            padding-bottom: 40px;
            transition: opacity 0.4s ease;
        }

        .post-item:hover {
            opacity: 0.5;
        }

        .post-link {
            text-decoration: none;
            color: inherit;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .post-date {
            font-size: 0.75rem;
            letter-spacing: 0.2em;
            color: #aaa;
            font-family: sans-serif;
        }

        .post-title {
            font-size: 1.2rem;
            letter-spacing: 0.15em;
            line-height: 1.8;
        }

        footer {
            margin-top: auto;
            padding: 40px;
            font-size: 0.65rem;
            color: #ccc;
            letter-spacing: 0.1em;
        }

        @media (max-width: 768px) {
            header { padding: 80px 0 50px; }
            .post-title { font-size: 1.1rem; }
            .post-item { margin-bottom: 40px; padding-bottom: 30px; }
        }
    </style>
</head>
<body>
    <header>
        <h1>伝えたい写真</h1>
    </header>

    <main>
        <ul class="post-list">
            {posts.map((post: any) => (
                <li class="post-item">
                    <a href={`/posts/${post.id}`} class="post-link">
                        <span class="post-date">{formatDate(post.date)}</span>
                        <span class="post-title">{post.title}</span>
                    </a>
                </li>
            ))}
        </ul>
    </main>

    <footer>&copy; 2025 My Photo Blog</footer>
</body>
</html>